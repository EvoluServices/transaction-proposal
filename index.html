<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Transação Remota</title>
    
  <link href="https://br.evoluservices.com/wp-content/themes/Divi../../../uploads/2015/06/evoluservices.png" rel="shortcut icon" type="image/x-icon" />


    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #151515;
  background-color: #ac4142;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #505050;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #d0d0d0;
}
.highlight .p, .highlight .pi {
  color: #d0d0d0;
}
.highlight .gi {
  color: #90a959;
}
.highlight .gd {
  color: #ac4142;
}
.highlight .gh {
  color: #6a9fb5;
  background-color: #151515;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #aa759f;
}
.highlight .kc {
  color: #d28445;
}
.highlight .kt {
  color: #d28445;
}
.highlight .kd {
  color: #d28445;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #90a959;
}
.highlight .sr {
  color: #75b5aa;
}
.highlight .si {
  color: #8f5536;
}
.highlight .se {
  color: #8f5536;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #6a9fb5;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #90a959;
}
.highlight .ss {
  color: #90a959;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;json&quot;,&quot;java&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="json">json</a>
              <a href="#" data-language-name="java">java</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li>Nossos produtos</li>
            <li><a href='https://www.evcash.com.br/'>EvCash</a></li>
            <li><a href='https://www.saudeservice.com.br/'>SaudeService</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="evoluservices-api">EvoluServices API</h1>

<h2 id="introdu-o">Introdução</h2>

<p>O objetivo desta documentação é orientar o desenvolvedor sobre como utilizar nossas APIs para integrar com a solução EvCash/SaúdeService de transações Pinpad, descrevendo as funcionalidades, os métodos a serem utilizados, listando informações a serem enviadas e recebidas, e provendo exemplos.</p>

<p>As APIs estão organizadas em torno de um conjunto de endpoints acessíveis via HTTP que recebem e respondem JSON.</p>

<p>Antes do início da operação em ambiente de produção, é necessário passar pelo processo de homologação para que as implementações sejam certificadas junto à EvoluServices. Para maiores informações, por favor, entre em contato com a equipe de suporte.</p>

<h2 id="suporte-evoluservices">Suporte EvoluServices</h2>

<p>Caso persistam dúvidas relacionadas a implementação de ordem técnica ou não, a EvoluServices disponibiliza um time pronto para dar suporte nos seguintes contatos:</p>

<ul>
<li>+55 3014-8600 – <em>Capitais e Regiões Metropolitanas</em></li>
<li>+55 0800-940-4248 – <em>Demais Localidades</em></li>
<li>Email: <a href="mailto:desenvolvimento@evoluservices.com">desenvolvimento@evoluservices.com</a></li>
</ul>

<h2 id="hist-rico-de-revis-es">Histórico de revisões</h2>

<h3 id="v1-0-1"><strong>v1.0.1</strong></h3>

<ul>
<li>Descrição do parâmetro TerminalId do método <a href="#cria-transa-o-remota">RemoteTransaction #create</a></li>
<li>Adição do endpoint <a href="#terminais">Terminal #list</a></li>
</ul>

<h3 id="v1-0-0"><strong>v1.0.0</strong></h3>

<ul>
<li>Versão incial da documentação</li>
</ul>

<h1 id="autentica-o">Autenticação</h1>

<p>Os endpoints das APIs são protegidos por um <code class="prettyprint">Bearer</code> token que deve ser enviado no cabeçalho das requisições HTTP</p>

<p>Para obter um token de acesso é necessário apresentar as credenciais da sua aplicação ao método <code class="prettyprint">POST /remote/token</code>. As credenciais de acesso (username e apiKey) podem ser obtidas entrando em contato com a equipe de suporte.</p>

<p>O token de acesso possui uma data de expiração, mas também pode ser revogado antes do tempo. Sua implementação deve, portanto, ser capaz de tratar a renovação do token e fazer uma nova tentativa caso o token apresentado esteja inválido.</p>

<h3 id="requisi-o-http">Requisição HTTP</h3>

<p><code class="prettyprint">POST /remote/token</code></p>

<h3 id="header">Header</h3>

<p>É necessário especificar no header o tipo de conteúdo enviado no body da requisição.</p>

<p><code class="prettyprint">Content-Type</code>: <code class="prettyprint">application/json</code></p>

<blockquote>
<p><code class="prettyprint">Content-Type application/json</code></p>
</blockquote>

<h3 id="body">Body</h3>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
 </span><span class="nt">"auth"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="nt">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"teste"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"apiKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123mudar"</span><span class="w">
 </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Encapsular as propriedades abaixo em um objeto &ldquo;auth&rdquo;.</p>

<table><thead>
<tr>
<th>Propriedade</th>
<th>Tipo</th>
<th>Obrigatório</th>
<th>Descrição</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">username</code></td>
<td>Texto</td>
<td>Sim</td>
<td>Identificador da clínica ou profissional.</td>
</tr>
<tr>
<td><code class="prettyprint">apiKey</code></td>
<td>Texto</td>
<td>Sim</td>
<td>Chave para Autenticação de uso exclusivo do clínica ou profissional.</td>
</tr>
</tbody></table>

<h3 id="resposta">Resposta</h3>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"Bearer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"token"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<table><thead>
<tr>
<th>Propriedade</th>
<th>Tipo</th>
<th>Obrigatório</th>
<th>Descrição</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">Bearer</code></td>
<td>Texto</td>
<td>Sim</td>
<td>Token a ser utilizado no header de criação das transações.</td>
</tr>
</tbody></table>

<aside class="notice">Veja a seção <a href="#erros">Erros</a> para as respostas de requisições com erros.</aside>

<h1 id="transa-o-remota">Transação Remota</h1>

<h2 id="vis-o-geral">Visão Geral</h2>

<p>A API de transação remota permite que o processamento de transações de cartões de crédito e débito, através de dispositivos físicos (PinPad), seja disparadas por uma chamada HTTP. </p>

<p>Cada transação remota é reconhecida como uma cobrança que deverá ser efetivada através de uma transação. Para realizar a conciliação das cobranças e manter os dados consistentes, ao criar uma nova transação remota, você pode registrar um endereço de retorno (através do parâmetro <code class="prettyprint">callbackUrl</code>) que receberá notificações sobre mudanças de estado da transação.</p>

<p>A seguir, é possível ter uma visão geral das requisições que fazem parte dos processos de autenticação, registro de uma transação e retorno dos dados:</p>

<ul>
<li><strong>Autenticação: <code class="prettyprint">[POST] /remote/token</code></strong></li>
</ul>

<p>Para acessar os endpoints da API é necessário apresentar o token da sua aplicação que pode ser obtido através deste método, mediante apresentação das credenciais de acesso fornecidas pelo suporte (username e apiKey)</p>

<ul>
<li><strong>Cria uma transação remota: <code class="prettyprint">[POST] /remote/transaction</code></strong></li>
</ul>

<p>Cria uma nova transação referente a uma cobrança. Os parâmetros permitem detalhar o modo que a transação será executada e informar o endereço de retorno.</p>

<ul>
<li><strong>Retorno dos dados: Callback</strong></li>
</ul>

<p>Durante todo o ciclo de vida da transação (criação, aprovação/cancelamento, pagamento, etc), os dados da transação referentes às mudanças de estado são enviadas ao endereço informado ao criar a cobrança.</p>

<h2 id="cria-transa-o-remota">Cria Transação Remota</h2>

<p>Para criar uma transação que utilizará cartão de crédito, é necessário enviar uma requisição utilizando o método <code class="prettyprint">POST</code> utilizando no header o token informado além dos dados de uma transação para registro na EvoluServices, conforme o exemplo.</p>

<h3 id="requisi-o-http">Requisição HTTP</h3>

<p><code class="prettyprint">POST /remote/transaction</code></p>

<h3 id="header">Header</h3>

<p>É necessário especificar no header o tipo de conteúdo enviado no body da requisição, junto com o Bearer.</p>

<table><thead>
<tr>
<th>Parâmetro</th>
<th>Valor</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">Content-Type</code></td>
<td><code class="prettyprint">application/json</code></td>
</tr>
<tr>
<td><code class="prettyprint">Bearer</code></td>
<td><code class="prettyprint">TOKEN</code></td>
</tr>
</tbody></table>

<blockquote>
<p><code class="prettyprint">Content-Type application/json</code></p>

<p><code class="prettyprint">Bearer TOKEN</code></p>
</blockquote>

<aside class="warning">
  A requisição precisa incluir um <b>token de autenticação válido</b> no header.
</aside>

<h3 id="body">Body</h3>
<pre class="highlight java"><code> <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="c1">// JSON com as informações de inicio da transação remota</span>
        <span class="n">String</span> <span class="n">rawData</span> <span class="o">=</span> <span class="s">"{'transaction': { 'merchantId': 'ABC123','value': '10.00','installments': '2','paymentBrand': 'VISA_CREDITO'}}"</span><span class="o">;</span>

        <span class="c1">// Endpoint com somente os atributos necessários setados</span>
        <span class="n">URL</span> <span class="n">u</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"https://staging.evoluservices.com/remote/transaction"</span><span class="o">);</span>
        <span class="n">HttpURLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="o">(</span><span class="n">HttpURLConnection</span><span class="o">)</span> <span class="n">u</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
        <span class="n">conn</span><span class="o">.</span><span class="na">setDoOutput</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
        <span class="n">conn</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"POST"</span><span class="o">);</span>
        <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/json; charset=utf8"</span><span class="o">);</span>
        <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span>
                <span class="s">"Bearer"</span><span class="o">,</span>
                <span class="s">"xyz_456"</span><span class="o">);</span>
        <span class="n">OutputStream</span> <span class="n">os</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">();</span>
        <span class="n">os</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">rawData</span><span class="o">.</span><span class="na">toString</span><span class="o">().</span><span class="na">getBytes</span><span class="o">(</span><span class="s">"UTF-8"</span><span class="o">));</span>
        <span class="n">os</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

        <span class="n">StringBuilder</span> <span class="n">sb</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuilder</span><span class="o">();</span>
        <span class="kt">int</span> <span class="n">HttpResult</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>

        <span class="c1">// Se o resultado for HTTP OK, recebemos uma mensagem de sucesso</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">HttpResult</span> <span class="o">==</span> <span class="n">HttpURLConnection</span><span class="o">.</span><span class="na">HTTP_OK</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">BufferedReader</span> <span class="n">br</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">(),</span> <span class="s">"utf-8"</span><span class="o">));</span>

            <span class="n">String</span> <span class="n">line</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
            <span class="k">while</span> <span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">br</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">sb</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">line</span> <span class="o">+</span> <span class="s">"\n"</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">br</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">""</span> <span class="o">+</span> <span class="n">sb</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>

        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="c1">// Caso contrário, lemos o código e mensagem de erro</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">conn</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">());</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">conn</span><span class="o">.</span><span class="na">getResponseMessage</span><span class="o">());</span>
        <span class="o">}</span>

    <span class="o">}</span>
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"transaction"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> 
    </span><span class="nt">"merchantId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;id&gt;"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"terminalId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;id&gt;"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10.00"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"installments"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nt">"callbackUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;url&gt;"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"clientName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;name&gt;"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"installmentsCanChange"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"false"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"clientEmail"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;email&gt;"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<table><thead>
<tr>
<th>Propriedade</th>
<th>Tipo</th>
<th>Obrigatório</th>
<th>Descrição</th>
<th>Validação</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">merchantId</code></td>
<td>Texto</td>
<td>Sim</td>
<td>Identificador da clínica ou profissional (obtido junto ao suporte).</td>
<td><code class="prettyprint">[0-9A-Za-z]+</code></td>
</tr>
<tr>
<td><code class="prettyprint">terminalId</code></td>
<td>Texto</td>
<td>Não</td>
<td>Id do terminal reponsável por processar a transação. Caso especificado, a transação iniciará automaticamente, caso contrário, uma notificação será exibida nos dispositivos habilitados. A lista de ids pode ser obtida através do método <a href="#listar-todos-os-terminais">Listar terminais</a></td>
<td><code class="prettyprint">[0-9A-Za-z+/*]{6,300}</code></td>
</tr>
<tr>
<td><code class="prettyprint">value</code></td>
<td>Número</td>
<td>Sim</td>
<td>Valor do orçamento (em decimal, com o &ldquo;.&rdquo; como separador e 2 casas decimais).</td>
<td><code class="prettyprint">\d+\.\d{2}</code></td>
</tr>
<tr>
<td><code class="prettyprint">installments</code></td>
<td>Número</td>
<td>Não</td>
<td>Número de parcelas</td>
<td><code class="prettyprint">\d{1,9}</code></td>
</tr>
<tr>
<td><code class="prettyprint">paymentBrand</code></td>
<td>Texto</td>
<td>Não</td>
<td>Bandeira do cartão.</td>
<td><a href="#tabela-de-valores">Tabela de valores</a></td>
</tr>
<tr>
<td><code class="prettyprint">callbackUrl</code></td>
<td>Texto</td>
<td>Não</td>
<td>URL de retorno com os dados da transação após processamento. A URL deve ser https.</td>
<td><a href="https://commons.apache.org/proper/commons-validator/apidocs/org/apache/commons/validator/routines/UrlValidator.html">URLValidator</a> (Com schema apenas <code class="prettyprint">https</code>)</td>
</tr>
<tr>
<td><code class="prettyprint">clientName</code></td>
<td>Texto</td>
<td>Não</td>
<td>Nome do cliente final ao qual a transação pertence. Apesar de não obrigatório, recomenda-se fortemente que esse campo se preenchido.</td>
<td><code class="prettyprint">[0-9A-Za-záéíóúÁÉÍÓÚàèìòùÀÈÌÒÙâêîôûÂÊÎÔÛãõÃÕçÇäëïöüÄËÏÖÜ\(\) ]+</code></td>
</tr>
<tr>
<td><code class="prettyprint">installmentsCanChange</code></td>
<td>Booleano</td>
<td>Não</td>
<td>Define se o número de parcelas e a bandeira da transação podem ou não ser alterados pelo cliente.</td>
<td><code>(true&#124;false)</code></td>
</tr>
<tr>
<td><code class="prettyprint">clientEmail</code></td>
<td>Texto</td>
<td>Não</td>
<td>Email do cliente, para onde pode ser enviado o comprovante da venda, opcionalmente</td>
<td><code class="prettyprint">.+</code></td>
</tr>
</tbody></table>

<aside class="warning">
  A URL de callback tem que ser https.
</aside>

<h3 id="resposta">Resposta</h3>

<p><strong>Em caso de sucesso</strong>, retorna Status 200.</p>

<aside class="notice">Veja a seção <a href="#erros">Erros</a> para as respostas de requisições com erros.</aside>

<h2 id="callback">Callback</h2>

<p>Se uma URL for enviada ao criar a transação, um JSON contendo os dados a seguir será enviado via POST quando o status da transação for alterado.</p>
<pre class="highlight json"><code><span class="p">{</span><span class="w"> 
    </span><span class="nt">"remoteTransactionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;id&gt;"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"APPROVED"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"merchantId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;id&gt;"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10.00"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"paymentBrand"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VISA_CREDITO"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"transactionNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;transactionNumber&gt;"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"paymentQuantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"clientName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CLIENT_NOT_INFORMED"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"payments"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UNPAID"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">4.95</span><span class="p">,</span><span class="w">
        </span><span class="nt">"number"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nt">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"21/12/2016"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UNPAID"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">4.95</span><span class="p">,</span><span class="w">
        </span><span class="nt">"number"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nt">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"21/01/2017"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<table><thead>
<tr>
<th>Propriedade</th>
<th>Tipo</th>
<th>Descrição</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">remoteTransactionId</code></td>
<td>Texto</td>
<td>Identificador da transação.</td>
</tr>
<tr>
<td><code class="prettyprint">status</code></td>
<td>Texto</td>
<td>Status da transação (consulte <a href="#tabela-de-valores">a tabela de valores de status</a>).</td>
</tr>
<tr>
<td><code class="prettyprint">merchantId</code></td>
<td>Número</td>
<td>Identificador do estabelecimento.</td>
</tr>
<tr>
<td><code class="prettyprint">value</code></td>
<td>Número</td>
<td>Valor total da transação.</td>
</tr>
<tr>
<td><code class="prettyprint">paymentBrand</code></td>
<td>Texto</td>
<td>Bandeira do cartão (para lista consulte <a href="#tabela-de-valores">tabela de valores</a>).</td>
</tr>
<tr>
<td><code class="prettyprint">payments</code></td>
<td>Lista de objetos</td>
<td>Parcelas da transação.</td>
</tr>
<tr>
<td><code class="prettyprint">paymentQuantity</code></td>
<td>Número</td>
<td>Número de parcelas.</td>
</tr>
<tr>
<td><code class="prettyprint">clientName</code></td>
<td>Texto</td>
<td>Nome do cliente que passou a transação, quando fornecido.</td>
</tr>
<tr>
<td><code class="prettyprint">NSU</code></td>
<td>Número</td>
<td>NSU da transação, disponível apenas depois de aprovada.</td>
</tr>
</tbody></table>

<h3 id="par-metros-da-parcela">Parâmetros da parcela</h3>

<table><thead>
<tr>
<th>Propriedade</th>
<th>Tipo</th>
<th>Descrição</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">status</code></td>
<td>Texto</td>
<td>Status da parcela.</td>
</tr>
<tr>
<td><code class="prettyprint">value</code></td>
<td>Número</td>
<td>Valor da parcela, que será pago ao estabelecimento.</td>
</tr>
<tr>
<td><code class="prettyprint">number</code></td>
<td>Número</td>
<td>Número da parcela.</td>
</tr>
<tr>
<td><code class="prettyprint">date</code></td>
<td>Texto</td>
<td>Data estimada de pagamento da parcela.</td>
</tr>
</tbody></table>

<aside class="notice">Veja a seção <a href="#tabela-de-valores">Tabela de Valores</a> para os possíveis status da transação e da parcela.</aside>

<h2 id="exclui-transa-o-remota">Exclui Transação Remota</h2>

<p>É possivel remover transações remotas que ainda não foram processadas, enviando uma requisição do tipo
Delete para a URL raiz da transação remota.</p>

<h3 id="requisi-o-http">Requisição HTTP</h3>

<p><code class="prettyprint">DELETE /remote/{id}</code></p>

<h3 id="par-metros-da-url">Parâmetros da URL</h3>

<table><thead>
<tr>
<th>Parâmetro</th>
<th>Descrição</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">id</code></td>
<td>Identificador da transação remota (retornada na requisição da transação).</td>
</tr>
</tbody></table>

<aside class="warning">
  A requisição precisa incluir um <b>token de autenticação válido</b> no header.
</aside>

<h1 id="terminais">Terminais</h1>

<h2 id="listar-todos-os-terminais">Listar todos os terminais</h2>

<p>Retorna os terminais do estabelecimento que estão aptos a receber transação remota.</p>

<h3 id="requisi-o-http">Requisição HTTP</h3>

<p><code class="prettyprint">GET /remote/merchants/{merchantCode}/terminals</code></p>

<h3 id="header">Header</h3>

<p>Você deve especificar no cabeçalho da requisição o tipo de conteúdo enviado no corpo, bem como o token de acesso.</p>

<table><thead>
<tr>
<th>Parâmetro</th>
<th>Valor</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">Content-Type</code></td>
<td><code class="prettyprint">application/json</code></td>
</tr>
<tr>
<td><code class="prettyprint">Bearer</code></td>
<td><code class="prettyprint">TOKEN</code></td>
</tr>
</tbody></table>

<blockquote>
<p><code class="prettyprint">Content-Type application/json</code></p>

<p><code class="prettyprint">Bearer TOKEN</code></p>
</blockquote>

<h3 id="par-metros-da-url">Parâmetros da URL</h3>

<table><thead>
<tr>
<th>Parâmetro</th>
<th>Descrição</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">merchantCode</code></td>
<td>O código do estabelecimento ou profissional (obtido junto ao suporte).</td>
</tr>
</tbody></table>

<h3 id="resposta">Resposta</h3>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nt">"macAddress"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8d:c1:d3:12:14:bb"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"computerName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DESKTOP"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"terminalId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AA009999"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<table><thead>
<tr>
<th>Propriedade</th>
<th>Tipo</th>
<th>Descrição</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">macAddress</code></td>
<td>Texto</td>
<td>O endereço físico (MAC Address) associado ao terminal.</td>
</tr>
<tr>
<td><code class="prettyprint">computerName</code></td>
<td>Texto</td>
<td>O nome do computador assocuadi ao terminal.</td>
</tr>
<tr>
<td><code class="prettyprint">terminalId</code></td>
<td>Texto</td>
<td>O id do terminal que pode ser utilizado como parâmtro para <a href="#cria-transa-o-remota">iniciar uma transação remota</a>.</td>
</tr>
</tbody></table>

          <h1 id="tabela-de-valores">Tabela de valores</h1>

<h2 id="status-da-transa-o">Status da transação</h2>

<table><thead>
<tr>
<th>Status da Transação</th>
<th>Motivo</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">APPROVED</code></td>
<td>Transação aprovada com sucesso</td>
</tr>
<tr>
<td><code class="prettyprint">CANCELLED</code></td>
<td>Transação cancelada pelo estabelecimento</td>
</tr>
<tr>
<td><code class="prettyprint">ABORTED</code></td>
<td>Transação abortada devido a erros durante o processamento</td>
</tr>
<tr>
<td><code class="prettyprint">ABORTED_BY_MERCHANT</code></td>
<td>Transação abortada pelo estabelecimento</td>
</tr>
<tr>
<td><code class="prettyprint">REPROVED</code></td>
<td>Transação processa porém reprovada pelo banco</td>
</tr>
<tr>
<td><code class="prettyprint">PARTIALLY_CANCELLED</code>*</td>
<td>Transação parcialmente cancelada</td>
</tr>
</tbody></table>

<h2 id="status-da-parcela">Status da parcela</h2>

<table><thead>
<tr>
<th>Status da Transação</th>
<th>Motivo</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">PAYED</code></td>
<td>Parcela paga</td>
</tr>
<tr>
<td><code class="prettyprint">UNPAID</code></td>
<td>Parcela a pagar</td>
</tr>
<tr>
<td><code class="prettyprint">ANTICIPATION_REQUESTED</code></td>
<td>Antecipação da parcela solicitada</td>
</tr>
<tr>
<td><code class="prettyprint">ANTICIPATED</code></td>
<td>Antecipação da parcela paga</td>
</tr>
<tr>
<td><code class="prettyprint">CANCEL_REQUESTED</code></td>
<td>Cancelamento da parcela solicitado</td>
</tr>
<tr>
<td><code class="prettyprint">CANCELLED</code></td>
<td>Parcela cancelada</td>
</tr>
</tbody></table>

<h2 id="bandeira">Bandeira</h2>

<table><thead>
<tr>
<th>String da Bandeira</th>
<th>Nome da bandeira</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">VISA_CREDITO</code></td>
<td>Visa</td>
</tr>
<tr>
<td><code class="prettyprint">VISA_ELECTRON</code></td>
<td>Visa Electron (Débito)</td>
</tr>
<tr>
<td><code class="prettyprint">MASTERCARD</code></td>
<td>MasterCard</td>
</tr>
<tr>
<td><code class="prettyprint">MAESTRO</code></td>
<td>MasterCard Maestro (Débito)</td>
</tr>
<tr>
<td><code class="prettyprint">AMEX</code></td>
<td>American Express</td>
</tr>
<tr>
<td><code class="prettyprint">DINERS</code></td>
<td>Diners</td>
</tr>
<tr>
<td><code class="prettyprint">HIPERCARD</code></td>
<td>Hipercard</td>
</tr>
<tr>
<td><code class="prettyprint">AURA</code></td>
<td>Aura</td>
</tr>
<tr>
<td><code class="prettyprint">SOROCRED</code></td>
<td>Sorocred</td>
</tr>
<tr>
<td><code class="prettyprint">ELO</code></td>
<td>Elo</td>
</tr>
<tr>
<td><code class="prettyprint">SICREDI</code></td>
<td>Sicred</td>
</tr>
<tr>
<td><code class="prettyprint">ELO_DEBITO</code></td>
<td>Elo Débito</td>
</tr>
<tr>
<td><code class="prettyprint">HIPER</code></td>
<td>Hiper</td>
</tr>
<tr>
<td><code class="prettyprint">AGIPLAN</code></td>
<td>Agiplan</td>
</tr>
<tr>
<td><code class="prettyprint">BANESCARD</code></td>
<td>Banescard</td>
</tr>
<tr>
<td><code class="prettyprint">CREDZ</code></td>
<td>CredZ</td>
</tr>
<tr>
<td><code class="prettyprint">JCB</code></td>
<td>JCB</td>
</tr>
<tr>
<td><code class="prettyprint">CABAL</code></td>
<td>Cabal</td>
</tr>
<tr>
<td><code class="prettyprint">MAIS</code></td>
<td>Mais</td>
</tr>
</tbody></table>

          <h1 id="erros">Erros</h1>

<p>Códigos retornados em caso de erro, identificando o motivo do erro e suas respectivas mensagens.</p>

<h2 id="autentica-o">Autenticação</h2>

<p>Os erros desse método são do tipo <code class="prettyprint">HTTP 500</code>.</p>

<p><code class="prettyprint">Status: 500</code></p>

<blockquote>
<p><code class="prettyprint">Status: 500</code></p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
   </span><span class="nt">"success"</span><span class="p">:</span><span class="w"> </span><span class="s2">"false"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;Error message&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<table><thead>
<tr>
<th>Mensagem</th>
<th>Descrição</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">USER_TOKEN_NOT_FOUND</code></td>
<td>Verifique se o usuário está correto, ou entre em contato com o suporte para um novo usuário da API.</td>
</tr>
<tr>
<td><code class="prettyprint">PASSWORD_INVALID</code></td>
<td>Verifique se a chave da API está correta ou peça uma nova.</td>
</tr>
</tbody></table>

<aside class="notice">Veja a seção <a href="#autentica-o">Autenticação</a> para informações do fluxo de autenticação.</aside>
 

<h2 id="iniciar-uma-transa-o">Iniciar uma transação</h2>

<p>Os erros desse método são do tipo <code class="prettyprint">HTTP 401</code> e <code class="prettyprint">HTTP 500</code></p>

<p><code class="prettyprint">Status: 401</code></p>

<blockquote>
<p><code class="prettyprint">Status: 401</code></p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
   </span><span class="nt">"success"</span><span class="p">:</span><span class="w"> </span><span class="s2">"false"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;Error message&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<table><thead>
<tr>
<th>Mensagem</th>
<th>Descrição</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">REVOKED_TOKEN</code></td>
<td>O token foi revogado antes da data de expiração.</td>
</tr>
<tr>
<td><code class="prettyprint">INVALID_TOKEN</code></td>
<td>O token informado não é igual ao cadastrado.</td>
</tr>
<tr>
<td><code class="prettyprint">EXPIRED_TOKEN</code></td>
<td>O token não tem mais validade.</td>
</tr>
</tbody></table>

<aside class="notice">Para qualquer um dos casos acima peça um novo token de <a href="#autentica-o">/token</a>.</aside>

<p><code class="prettyprint">Status: 500</code></p>

<blockquote>
<p><code class="prettyprint">Status: 500</code></p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
   </span><span class="nt">"success"</span><span class="p">:</span><span class="w"> </span><span class="s2">"false"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;Error message&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<table><thead>
<tr>
<th>Mensagem</th>
<th>Descrição</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">PAYMENT_BRAND_ID_INVALID</code></td>
<td>A bandeira não existe.</td>
</tr>
<tr>
<td><code class="prettyprint">INSTALLMENTS_INVALID_FOR_DEBIT</code></td>
<td>Cartão de débito não pode ter mais de uma parcela.</td>
</tr>
<tr>
<td><code class="prettyprint">INVALID_PAYMENT_BRAND</code></td>
<td>A bandeira não está habilitada para o estabelecimento.</td>
</tr>
<tr>
<td><code class="prettyprint">INVALID_INSTALLMENTS_QUANTITY_OR_VALUE</code></td>
<td>O número de parcelas ou valor minimo da parcela não é aceito pelo estabelecimento.</td>
</tr>
<tr>
<td><code class="prettyprint">MERCHANT_ID_INVALID</code></td>
<td>Id do merchant não existe.</td>
</tr>
<tr>
<td><code class="prettyprint">TERMINAL_ID_INVALID</code></td>
<td>Id do terminal não existe.</td>
</tr>
<tr>
<td><code class="prettyprint">MERCHANT_TERMINAL_INVALID</code></td>
<td>Terminal do merchant não está apto a receber transações remotas</td>
</tr>
<tr>
<td><code class="prettyprint">VALUE_FIELD_INVALID</code></td>
<td>Formato do campo <code class="prettyprint">value</code> inválido</td>
</tr>
<tr>
<td><code class="prettyprint">NAME_CLIENT_INVALID</code></td>
<td>Campo <code class="prettyprint">clientName</code> inválido</td>
</tr>
</tbody></table>

<aside class="notice">Veja a seção <a href="#cria-transa-o-remota">Iniciar Transação</a> para informações do fluxo de criação de transações.</aside>

<h2 id="remover-uma-transa-o">Remover uma transação</h2>

<table><thead>
<tr>
<th>Mensagem</th>
<th>Descrição</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">INEXISTENT_REMOTE_TRANSACTION</code></td>
<td>Transação remota inexistente</td>
</tr>
<tr>
<td><code class="prettyprint">REMOTE_TRANSACTION_ALREADY_PROCESSED</code></td>
<td>Já foi iniciado o processamento da transação remota</td>
</tr>
</tbody></table>

<aside class="notice">Veja a seção <a href="#exclui-transa-o-remota">Remover Transação</a> para informações do fluxo de remoção de transações.</aside>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="json">json</a>
                <a href="#" data-language-name="java">java</a>
          </div>
      </div>
    </div>
  </body>
</html>
